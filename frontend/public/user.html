<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>使用者畫面</title>
    <link rel="stylesheet" href="css/back.css">
    <link rel="stylesheet" href="css/Backstage.css">
    <link rel="stylesheet" href="css/user.css" media="all">
    <link rel="stylesheet" href="css/index.css" media="all">
    <script src="js/front_side.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jwt-decode@4.0.0/build/cjs/index.min.js"></script>
</head>
<body>
    <div class="setbody">
        <div class="sidebar-toggle" onclick="toggleSidebar()">☰</div>

        <!-- 功能列表 -->
        <div id="sidebar-container"></div>
        <!-- 內容區域 -->
        <div class="main">
        <main id="contents" class="contents">
            <h2 class="title">使用者</h2>
            <div class="left">
                <div class="avatar"></div>
                <div class="name"></div>
                <a href="Manage_permissions.html" id="view-permission-button">查看權限</a>

            </div>
            <div class="right">
                <a href="peopleedit.html" class="button">修改個人資料</a>
                <a href="passwordedit.html" class="button">修改密碼</a>
                <!-- <a href="category.html" class="button">音樂偏好設置</a> -->
                <a href="login.html" class="button logout">登出</a>
            </div>
        </main> 
        </div>
    </div>

    <script>
        // 取得 JWT Token
        const token = localStorage.getItem('token');
        if (token) {
            const decodedToken = jwtDecode(token);
            document.querySelector('.name').textContent = decodedToken.username;
            console.log(46,decodedToken);
            const isOwner = decodedToken.is_owner;
            if (isOwner == true) {
                document.getElementById('view-permission-button').style.display = 'block';
            }
            
        }
    </script>
</body>



</html>
